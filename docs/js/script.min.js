const navBtn=document.querySelector(".menu-btn"),navMenu=document.querySelector(".nav");function getLike(){const e=document.querySelectorAll(".card__like"),t=document.querySelector(".popup");function r(){t.classList.remove("popup_open")}e.forEach((e=>{e.addEventListener("click",(()=>{e.classList.contains("card__like_active")||t.classList.add("popup_open"),e.classList.toggle("card__like_active"),setTimeout(r,1e3)}))}))}navBtn.addEventListener("click",(()=>{navBtn.classList.toggle("menu-btn_open-menu"),navMenu.classList.toggle("nav_open")})),getLike();const templateFragment=document.querySelector("#card-template").content,template=templateFragment.querySelector(".card"),fragment=document.createDocumentFragment(),btnShowMore=document.querySelector(".main__btn-show-more"),cardsBox=document.querySelector(".main__cards");btnShowMore.addEventListener("click",(()=>{for(let e=0;e<=20;e++){const e=template.cloneNode(!0),t=e.querySelector(".card__img"),r=e.querySelector(".card__price");let n=Math.floor(3*Math.random()+1),c=Math.floor(4*Math.random()+1);t.attributes[1].textContent=`img/cat${n}.jpg`,r.textContent=`${c}0 000 руб.`,e.setAttribute("data-price",`${c}0000`),fragment.appendChild(e)}cardsBox.appendChild(fragment),btnUp.classList.remove("main__btn-up_hide"),getLike()}));const btnPrice=document.querySelector("#sorting-btn-price"),btnAge=document.querySelector("#sorting-btn-age");function sort(e,t){for(let r=0;r<cardsBox.children.length;r++)for(let n=r;n<cardsBox.children.length;n++)e.classList.contains("sorting__btn_up")?+cardsBox.children[r].getAttribute(t)<+cardsBox.children[n].getAttribute(t)&&(replacedNode=cardsBox.replaceChild(cardsBox.children[n],cardsBox.children[r]),insertAfter(replacedNode,cardsBox.children[r])):+cardsBox.children[r].getAttribute(t)>+cardsBox.children[n].getAttribute(t)&&(replacedNode=cardsBox.replaceChild(cardsBox.children[n],cardsBox.children[r]),insertAfter(replacedNode,cardsBox.children[r]))}function insertAfter(e,t){return t.parentNode.insertBefore(e,t.nextSibling)}btnPrice.addEventListener("click",(()=>{btnPrice.classList.toggle("sorting__btn_up"),sort(btnPrice,"data-price")})),btnAge.addEventListener("click",(()=>{btnAge.classList.toggle("sorting__btn_up"),sort(btnAge,"data-age")}));const cards=document.querySelectorAll(".card"),btnUp=document.querySelector(".main__btn-up");window.addEventListener("scroll",(function(){pageYOffset>=700?btnUp.classList.remove("main__btn-up_hide"):btnUp.classList.add("main__btn-up_hide")}));const regEmail=/^((([0-9A-Za-z]{1}[-0-9A-z\.]{0,30}[0-9A-Za-z]?)|([0-9А-Яа-я]{1}[-0-9А-я\.]{0,30}[0-9А-Яа-я]?))@([-A-Za-z]{1,}\.){1,}[-A-Za-z]{2,})$/,userEmail=document.querySelector("#user-email"),form=document.querySelector("#form");let resEmail="";function regexValidite(e,t){return t.test(e)}function verification(e,t){const r=document.querySelector(".form__field-error-mess");if(e.value.length<=5)r.textContent="Заполните поле.",userEmail.classList.add("form__field-input_invalid");else{if(regexValidite(e.value,t))return r.textContent="",userEmail.classList.remove("form__field-input_invalid"),!0;r.textContent="Проверьте поле на правильность заполения."}}userEmail.addEventListener("input",(()=>{resEmail=verification(userEmail,regEmail)})),form.addEventListener("submit",(e=>{e.preventDefault(),resEmail?(alert("Подписка оформлена"),userEmail.value=""):alert("Проверьте правильность заполения.")}));